common:
    output_directory: processed_data/english

steps:
    - type: opus_read
      parameters:
            corpus_name: OpenSubtitles
            source_language: es
            target_language: en
            release: v2018
            preprocessing: raw
            src_output: ost.es.gz
            tgt_output: ost.en.gz
            suppress_prompts: true
    - type: remove_duplicates 
      parameters:
            inputs:
                - ost.es.gz
                - ost.en.gz
            outputs:
                - ost_dedup.es.gz
                - ost_dedup.en.gz
    - type: filter
      parameters:
            inputs:
                - ost_dedup.es.gz
                - ost_dedup.en.gz 
            outputs:
                - ost_filt.es.gz
                - ost_filt.en.gz
            filters:
                - LengthFilter:
                    unit: word
                    min_length: 5
                    max_length: 30
                - LengthRatioFilter:
                    unit: word
                    threshold: 1.5
                - LanguageIDFilter:
                    languages:
                        - es
                        - en
                    thresholds:
                        - 0.9
                        - 0.9
    - type: preprocess
      parameters:
          inputs:
          - ost_filt.es.gz
          - ost_filt.en.gz
          outputs:
          - ost_labeled.es.gz
          - ost_labeled.en.gz
          preprocessors:
          - PrefixLabels:
              labels:
              - <eng>
              - <eng-default>
              - <noisy>
            module: create_opusfilter_config
